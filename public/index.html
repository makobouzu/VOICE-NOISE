<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>VOICE | NOISE demo</title>
  <link rel="icon" href="dist/icon.ico">

  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,shrink-to-fit=no"/>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js" defer></script>
  <script src='https://api.mapbox.com/mapbox-gl-js/v2.0.0/mapbox-gl.js' defer></script>
  <link href='https://api.mapbox.com/mapbox-gl-js/v2.0.0/mapbox-gl.css' rel='stylesheet' />
  <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.5.1/mapbox-gl-geocoder.min.js"></script>
  <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.5.1/mapbox-gl-geocoder.css" type="text/css" />
  
  <script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.auto.min.js"></script>

  <script src="./dist/rnnoise-runtime.js" defer></script>
  <script src="./dist/recorder.js" defer></script>
  <script src="map.js" defer></script>
  <script src="index.js" defer></script>

  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css">
  <script defer src="https://use.fontawesome.com/releases/v5.6.3/js/all.js"></script>
  
  <style>
    body { margin: 0; padding: 0; font-family: Helvetica}  
    #map { position: absolute; top: 0; bottom: 0; width: 100%;}
    .mapboxgl-popup-content { position: relative; background: #f7f8f9; border-radius: 3px; box-shadow: 0 1px 2px #222529; padding: 10px 10px 10px; pointer-events: auto;}
    .mapboxgl-ctrl-geocoder { width: 40px!important;}
    .mapboxgl-ctrl-group button { width: 40px; height: 40px;}
    .mapboxgl-ctrl-geocoder--icon-search { left: 8px; width: 22px; height: 22px; color: black;}
    .mapboxgl-ctrl-geocoder.mapboxgl-ctrl-geocoder--collapsed { border: 2px solid rgba(0,0,0,0.15); border-radius: 7px;}
    #geocoder-container > div { min-width: 50%; margin-left: 25%;}
    audio { width: 200px; }
    #contents { position: fixed; z-index: 1; margin: 10px; border: 1.5px solid rgba(0,0,0,0.1); border-radius: 7px;}
    .btn-light { border: 1px solid rgba(0,0,0,0.1);}
    p { margin: 0px 0px 10px 3px; font-size: 13px;}
    #slider { position: fixed; z-index: 1; width: 100%; bottom: 80px}
    #noise { text-align: center; margin: 0px auto; display: block; transform: scale(1.5); width: 30%; bottom: 20px; position: relative;}
    .modal-backdrop { position: static; background-color: transparent;}
    .modal-header { padding: 1rem 1rem 0rem 1rem;}
    .modal-title { margin-bottom: 10px;}
    .modal-body { padding: 1rem 1rem 0rem 1rem;}
    .input-group-text { border-radius: .25rem 0 0 .25rem;}
    .modal-footer { display: block;}
    .progress-bar { background-color: #222529;}
    #complete { margin: 5px 0px 0px 3px; font-size: 13px;}
    input[type="range"] { -webkit-appearance: none; background-color: #222529; height: 5px; border-radius: 5px; outline: 0;}
    input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; background: url("dist/sound.svg") 0 0; background-color: #f7f8f9; width: 25px; height: 25px; border-radius: 50%; border: 3px solid #222529; cursor: pointer; transition: .3s ease-in-out;}​
    input[type="range"]::-webkit-slider-thumb:hover { background-color: #222529; border: 2px solid #f7f8f9;}
    input[type="range"]::-webkit-slider-thumb:active { transform: scale(1.4);}
  </style>
</head>

<body>
  <div id='map'></div>
  <div id="slider">
    <label for="noise" class="form-label"></label>
    <input type="range" class="form-range" min="0" max="1" step="0.1" value=0 id="noise">
  </div>

<div id='contents'>
  <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
    <div class="btn-group me-2" role="group" aria-label="Second group"></div>
    <div class="btn-group-vertical btn-group-lg">
      <button type="button" class="btn btn-light" id="sound" onclick="inputSound(this);"><i class="fas fa-microphone"></i></button>
      <button type="button" class="btn btn-light" id='start' onclick="startRecording(this);"><i class="far fa-dot-circle"></i></button>
      <button type="button" class="btn btn-light" id='stop' onclick="stopRecording(this);"><i class="far fa-pause-circle"></i></button>
      <button type="button" class="btn btn-light" data-toggle="modal" data-target="#uploadModal"><i class="fas fa-cloud-upload-alt"></i></button>
      <button type="button" class="btn btn-light" data-toggle="modal" data-target="#infoModal"><i class="fas fa-info"></i></button>
    </div>
    </div>
  </div>
</div>

  <!-- Upload Modal -->
  <div class="modal fade" id="uploadModal" tabindex="-1" role="dialog" aria-labelledby="uploadModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="infoModalLabel">Upload Recording Data</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="input-group mb-3" id="fileinput">
            <span class="input-group-text" id="basic-addon">Title</span>
            <input id="db_filename" type="text" class="form-control" aria-label="Sizing example input" aria-describedby="basic-addon">
          </div>
        </div>
        <div class="modal-footer">
          <div class="progress">
            <div id="progress" class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
          </div>
          <p class="fw-bold" id="complete">Upload Complete!!</p>
          </br>
          <button type="button" class="btn btn-secondary btn-sm" id="upload" onclick="uploadRecording(this);">Upload</button>
          <button type="button" class="btn btn-secondary btn-sm" id="close" data-dismiss="modal" onclick="reload(this)">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Info Modal -->
  <div class="modal fade" id="infoModal" tabindex="-1" role="dialog" aria-labelledby="infoModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title" id="infoModalLabel">VOICE | NOISE</h3></br>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            <a href="https://github.com/badges/shields"><img src="https://img.shields.io/badge/Safari-Passing-gre.svg?logo=Safari&style=plastic"></a>
            <a href="https://github.com/badges/shields"><img src="https://img.shields.io/badge/Chrome-Failed-red.svg?logo=Google%20Chrome&style=plastic"></a>
            <a href="https://github.com/badges/shields"><img src="https://img.shields.io/badge/Firefox-Failed-red.svg?logo=Firefox&style=plastic"></a>
            </br></br>
            <p>　本作品は、物理空間と情報空間が重層化した都市空間を舞台に、AIを用いたノイズキャンセリングシステムに「ノイズ」として識別・排除される音を再解釈する試みである。オンライン環境でのコミュニケーションが当たり前となりつつある現在、オンライン会議ツールや配信アプリの中で用いられるノイズキャンセリングは「人の声」以外の音を全て「ノイズ」としてラベル付けをして排除する。しかし、AIのシステムによって身勝手に識別された「ノイズ」は、本当に人々にとってのノイズなのだろうか、「ノイズ」とは一体何なのだろうか。「人の声」だけを取り出している、現在では当たり前となったノイズキャンセリングされた音と、「ノイズ」が持つ音の多様さを対比させながら、普段自らが聴いている音とは何か、排除している音とは何かを再考する契機としたい。</p>
            <p>　鑑賞者は、有線イヤホン/ヘッドホンをスマートフォンに接続した状態で本作品を起動する。本作品では、VOICE(人の声)とNOISE(ノイズ)の間を聴き分けることができるスライダーを用意し、鑑賞者はスライダーを操作しながら都市のサウンドスケープを聴くことができる。体験後、鑑賞者が録音した音声は、サウンドマップに共有され、VOICE | NOISEのサウンドマップが形成される。体験を通して、鑑賞者はAIによるノイズキャンセリングのシステムを理解し、システム的に処理される「ノイズ」の存在に知覚的になることができる。</p></br>
            <p> This project is an experience to redefine the sounds that are identified and eliminated as "noise" by an AI-based noise cancellation system in an urban space where physical and informational spaces are layered. As communication in the online environment is becoming more and more commonplace, the noise cancelling used in online meeting tools and distribution apps labels all sounds other than the human voice as "noise" and eliminates them. But is the "noise" selfishly identified by AI systems really noise for people, and what exactly is "noise"? By contrasting the sound of noise-canceling "human voices" with the variety of sounds that "noise" has, I want you to take the opportunity to reconsider what it is that you usually hear and what it is that you exclude.</p>
            <p> The spectator can start this project with a wired earphone/headphone connected to a smartphone. This apps has a slider that can distinguish between VOICE (human voice) and NOISE (noise), and the spectator can listen to the urban soundscape while operating the slider. After the experience, the audio recorded by the spectator is shared with the sound map, forming the VOICE | NOISE sound map. Through the experience, the spectator can understand the system of noise cancellation by AI and become perceptive to the presence of the "noise" processed systematically.</p></br>
            <div class="embed-responsive embed-responsive-16by9">
              <iframe class="embed-responsive-item" width="560" height="315" src="https://www.youtube.com/embed/aJenM9Pt93w" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div></br>
            <p>情報科学芸術大学院大学 メディア表現研究科</p></br>
            <p>Archival Archetyping Project 所属</p></br>
            <p>M1</p></br>
            <p>天野真</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary btn-sm" id="close" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

</body>
</html>